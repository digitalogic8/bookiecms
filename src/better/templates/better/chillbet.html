{% load static %}
<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <title>Chill Bet</title>
      <!-- Bootstrap -->
      <link rel="stylesheet" type="text/css" href="{% static 'better/css/bootstrap.css' %}" />
      <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs4/dt-1.10.16/datatables.min.css"/>
      <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
      <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
      <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
      <![endif]-->
   </head>
   <body>
      <nav>
         <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
               <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button>
               <a class="navbar-brand" href="#">Chill.Bet</a> 
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse">
               <ul class="nav navbar-nav navbar-right hidden-sm">
                  <li class="dropdown">
                     <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true">Settings <span class="caret"></span></a>
                     <ul class="dropdown-menu">
                        <li><a href="#">Set My Favorite Sports</a> </li>
                        <li><a href="#">Profile</a> </li>
                        <li><a href="#">Balance Sheet</a> </li>
                        <li role="separator" class="divider"></li>
                        <li><a href="/logout">Log Out</a> </li>
                     </ul>
                  </li>
               </ul>
            </div>
            <!-- /.navbar-collapse --> 
         </div>
         <!-- /.container-fluid --> 
      </nav>
      <div class="container">
         <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
               <div id="carousel1" class="carousel slide">
                  <ol class="carousel-indicators">
                     <li data-target="#carousel1" data-slide-to="0" class="active"> </li>
                     <li data-target="#carousel1" data-slide-to="1" class=""> </li>
                     <li data-target="#carousel1" data-slide-to="2" class=""> </li>
                  </ol>
                  <div class="carousel-inner">
                     <div class="item">
                        <img class="img-responsive" src="{% static 'better/images/olympics.jpg' %}" alt="thumb">
                        <div class="carousel-caption"> Winter Olympics wagering is on fire. You can bet on anything from bobsled to alpine skiing. </div>
                     </div>
                     <div class="item active">
                        <img class="img-responsive" src="{% static 'better/images/mlb.jpg' %}" alt="thumb">
                        <div class="carousel-caption"> Baseball betting is on fire! Click here to find your favorite team. </div>
                     </div>
                     <div class="item">
                        <img class="img-responsive" src="{% static 'better/images/nfl.jpg' %}" alt="thumb">
                        <div class="carousel-caption"> Football is just around the corner. Check out the top picks for week1. </div>
                     </div>
                  </div>
                  <a class="left carousel-control" href="#carousel1" data-slide="prev"><span class="icon-prev"></span></a> <a class="right carousel-control" href="#carousel1" data-slide="next"><span class="icon-next"></span></a>
               </div>
            </div>
         </div>
         <hr>
      </div>
      <div class="container">
         <div class="row">
            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
               <div class="row">
                  <div class="col-lg-2 col-md-3 col-sm-3 col-xs-2"><img class="img-circle" alt="Place Bets" src="{% static 'better/images/40X40.gif' %}"></div>
                  <div class="col-lg-6 col-md-9 col-sm-9 col-xs-9">
                     <h4>Place Bets</h4>
                  </div>
               </div>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
               <div class="row">
                  <div class="col-lg-2 col-md-3 col-sm-3 col-xs-2"><img class="img-circle" alt="Bet History" src="{% static 'better/images/40X40.gif' %}"></div>
                  <div class="col-lg-6 col-md-9 col-sm-9 col-xs-9">
                     <h4><a href='betHistory/'>Bet History</a></h4>
                  </div>
               </div>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
               <div class="row">
                  <div class="col-lg-2 col-md-3 col-sm-3 col-xs-2"><img class="img-circle" alt="Messages" src="{% static 'better/images/40X40.gif' %}"></div>
                  <div class="col-lg-6 col-md-9 col-sm-9 col-xs-9">
                     <h4>Messages</h4>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <hr>
      <div class="container">
         <h2>Place Bets</h2>
         <ul class="nav nav-tabs">
            {% for sport in sports %}
            <li><a data-toggle="tab" href="#{{ sport }}">{{ sport }}</a></li>
            {% endfor %}
         </ul>
         <div class="tab-content">
            {% for sport, contestsRed in contests.items %}
            <div id="{{ sport }}" class="tab-pane fade">
               <h3>{{ sport }}</h3>
               <table id="{{ sport }}Table" class="table table-striped table-bordered" style="width:100%">
                  <thead>
                     <tr>
                        <th scope="col">Home</th>
                        <th scope="col">Away</th>
                        <th scope="col">Date</th>
                        <th scope="col">moneyline</th>
                        <th scope="col">o/u</th>
                        <th scope="col">spread</th>
                     </tr>
                  </thead>
                  <tbody>
                     {% for contest in contestsRed %}
                     <tr>
                        <td>{{ contest.contest.homeTeam }}  <img class="img-fluid" src="{% static contest.contest.homeTeam.teamLogo %}" alt="Thumbnail Image 1" class="img-responsive"></td>
                        <td>{{ contest.contest.awayTeam }}  <img class="img-fluid" src="{% static contest.contest.awayTeam.teamLogo %}" alt="Thumbnail Image 1" class="img-responsive"></td>
                        <td>{{ contest.contest.contest_date }} </td>
                        <td>
                           <table class="table table-sm">
                              <tbody>
                                 {% for bet in contest.availableBets %}
                                 {% if bet.bettype == "moneyline" %}
                                 <tr>
                                    <td>{{bet.team.teamAbbreviation}}</td>
                                    <td>{{ bet.odds }}</td>
                                    <td><button type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#betMoneyline{{bet.team.teamAbbreviation}}Modal">BET</button></td>
                                 </tr>
                                 <!-- Modal -->
                                 <div class="modal fade" id="betMoneyline{{bet.team.teamAbbreviation}}Modal" tabindex="-1" role="dialog" aria-labelledby="betMoneyline{{bet.team.teamAbbreviation}}ModalLabel" aria-hidden="true">
                                    <div class="modal-dialog" role="document">
                                       <div class="modal-content">
                                          <div class="modal-header">
                                             <h5 class="modal-title" id="exampleModalLabel">Place a Bet</h5>
                                             <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                             <span aria-hidden="true">&times;</span>
                                             </button>
                                          </div>
                                          <div class="modal-body">
                                             You are placing a moneyline bet on {{bet.team.teamAbbreviation}} at {{ bet.odds }}
                                             <form action="/better/" method="POST" id="betMoneyline{{bet.team.teamAbbreviation}}Form">
                                                {% csrf_token %}
                                                <input type="hidden" value="{{bet.id}}" name="bet" id="bet">
                                                <input type="hidden" value="{{bet.odds}}" name="displayedOdds" id="displayedOdds">
                                                <div class="input-group">
                                                   <span class="input-group-addon">$</span>
                                                   <input type="number" class="form-control" name="betAmount" id="betAmount" placeholder="0.00">
                                                </div>
                                             </form>
                                          </div>
                                          <div class="modal-footer">
                                             <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                                             <button type="submit" class="btn btn-primary" form="betMoneyline{{bet.team.teamAbbreviation}}Form">Place Bet</button>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                                 {% endif %}
                                 {% endfor %}
                              <tbody>
                           </table>
                        </td>
                        <td>
                           <table class="table table-sm">
                              <tbody>
                                 {% for bet in contest.availableBets %}
                                 {% if bet.bettype == "spread" %}
                                 <tr>
                                    <td>{{bet.team.teamAbbreviation}}</td>
                                    <td>{{ bet.odds }}</td>
                                    <td>{{ bet.spread }}</td>
                                    <td><button type="button" class="btn btn-primary btn-sm">BET</button></td>
                                 </tr>
                                 {% endif %}
                                 {% endfor %}
                              <tbody>
                           </table>
                        </td>
                        <td>
                           <table class="table table-sm">
                              <tbody>
                                 {% for bet in contest.availableBets %}
                                 {% if bet.bettype == "total" %}
                                 <tr>
                                    <td>{{bet.team.teamAbbreviation}}</td>
                                    <td>{{ bet.odds }}</td>
                                    <td>{{ bet.spread }}</td>
                                    <td><button type="button" class="btn btn-primary btn-sm">BET</button></td>
                                 </tr>
                                 {% endif %}
                                 {% endfor %}
                              <tbody>
                           </table>
                        </td>
                     </tr>
                     {% endfor %}
                  </tbody>
               </table>
            </div>
            {% endfor %}
         </div>
      </div>
      <hr>
      <div class="container well">
         <div class="row">
            <div class="col-xs-6 col-sm-6 col-md-6 col-lg-7">
               <div class="row">
                  <div class="col-sm-4 col-md-4 col-lg-4 col-xs-6">
                     <div>
                        <ul class="list-unstyled">
                           <li> <a>Betting Rules</a> </li>
                           <li> <a>Hold Harmless</a> </li>
                           <li> <a>Safe Gambling</a> </li>
                           <li> <a>Become a Bookie</a> </li>
                           <li> <a>Contact Developer</a> </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div>
            <div class="col-xs-6 col-sm-6 col-md-6 col-lg-5">
               <address>
                  <strong>Chillbet, Inc.</strong><br>
                  www.chill.bet<br>
                  Boulder, CO 80301<br>
                  <abbr title="Phone">P:</abbr> (205) 822-2222
               </address>
               <address>
                  <strong>Web Dev </strong><br>
                  <a href="mailto:#">web.dev@chill.bet</a>
               </address>
            </div>
         </div>
      </div>
      <footer class="text-center">
         <div class="container">
            <div class="row">
               <div class="col-xs-12">
                  <p>Copyright © Chill Bet. All rights reserved.</p>
               </div>
            </div>
         </div>
      </footer>
      <!-- jQuery (necessary for Bootstrap's JavaScript plugins) --> 
      <script src="{% static 'better/js/jquery-1.11.3.min.js' %}"></script> 
      <!-- Include all compiled plugins (below), or include individual files as needed --> 
      <script src="{% static 'better/js/bootstrap.js' %}"></script>
      <script type="text/javascript" src="https://cdn.datatables.net/v/bs4/dt-1.10.16/datatables.min.js"></script>
      <script type="text/javascript">
         $(document).ready(function() {
             $('#example').DataTable();
         } );
      </script>
   </body>
</html>